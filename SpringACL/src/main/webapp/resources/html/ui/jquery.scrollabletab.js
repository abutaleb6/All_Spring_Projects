(function(a,b){if(!a.xui){a.xui={}}var c=a.extend({},a.ui.tabs.prototype),d={_create:c._create,_tabify:c._tabify,_destroy:c._destroy,_update:c._update};a.xui.tabs=a.extend(c,{options:a.extend({},c.options,{scrollable:false,closable:false,animationSpeed:500}),_create:function(){var b=this,c=b.options;d._create.apply(b);if(c.scrollable){var e=b.element,f=e.wrap("<div></div>").parent().addClass("ui-scrollable-tabs ui-widget-content ui-corner-all"),g=b.element.find(".ui-tabs-nav:first").removeClass("ui-corner-all"),h=a('<ol class="ui-helper-reset ui-helper-clearfix ui-tabs-nav-arrows"></ol>').prependTo(f),i=a('<li class="ui-tabs-arrow-previous ui-state-default" title="Previous"><a href="#"><span class="ui-icon ui-icon-carat-1-w">Previous tab</span></a></li>').prependTo(h),j=a('<li class="ui-tabs-arrow-next ui-state-default" title="Next"><a href="#"><span class="ui-icon ui-icon-carat-1-e">Next tab</span></a></li>').appendTo(h);a.fn.reverse=[].reverse;function k(){p();o();j.click(function(){var a=g.find("li.ui-tabs-selected").next("li");if(a.length){a.find("a").trigger("click")}else{}});i.click(function(){var a=g.find("li.ui-tabs-selected").prev("li");if(a.length){a.find("a").trigger("click")}else{}});e.bind("tabsselect",function(b,c){var d=a(c.tab).parent();if(d.next("li").length==0){j.hide("fade")}var e=l(d);m(e.right?"left":e.left?"right":"none",d)}).bind("tabsadd",function(b,c){var d=a(c.tab).parent();d.find("a").trigger("click")}).bind("tabsremove",function(a,b){if(!c.closable)return;if(e.tabs("length")==1){e.find("li .ui-tabs-close").hide();g.removeClass("ui-tabs-closable")}if(n()<h.width()){j.hide("fade");i.hide("fade");return}if(!l(g.find("li:last")).right){m("left",g.find("li:last"))}o()})}function l(a){var b=new Object;if(a.next("li").length!=0){b.right=a.next("li")[0].offsetLeft+15}else{b.right=a[0].offsetLeft+a.outerWidth(true)}b.right=b.right+g[0].offsetLeft>h.width();b.left=a[0].offsetLeft+g[0].offsetLeft<0+(i.is(":visible")?i.outerWidth():0);return b}function m(a,b){if(a=="none")return;if(a=="left"){i.show("fade");if(b.next("li").length==0){j.hide("fade")}var d=0;if(b.next("li").length!=0){d=b.next("li")[0].offsetLeft}else{d=b[0].offsetLeft+b.outerWidth(true)}d=h.width()-d;d=d-(b.next("li").length==0?1:j.outerWidth());d=d+"px";g.animate({"margin-left":d},c.animationSpeed)}else{j.show("fade");if(b.prev("li").length==0){i.hide("fade")}var e=0;var f=b.prev("li").length==0?2:i.outerWidth()+2;e=(b[0].offsetLeft-f)*-1;g.animate({"margin-left":e},c.animationSpeed)}}function n(a){var b=a?a[0].offsetLeft+a.outerWidth(true):g.find("li:last")[0].offsetLeft+g.find("li:last").outerWidth(true);return b}function o(){if(n()>h.width()){j.show("fade")}else{j.hide("fade");i.hide("fade");g.css("margin-left",0)}}function p(b){if(!c.closable)return;var d=b||g.addClass("ui-tabs-closable").find("li");d.each(function(){var b=a(this).addClass("stHasCloseBtn");a(this).append(a("<span/>").addClass("ui-state-default ui-corner-all ui-tabs-close").hover(function(){a(this).toggleClass("ui-state-hover")}).append(a("<span/>").addClass("ui-icon ui-icon-circle-close").html("Close").attr("title","Close this tab").click(function(a){e.tabs("remove",b.prevAll("li").length)})))})}a.fn.refreshTabs=function(){var a=g.find("li.ui-tabs-selected");e.trigger("tabsselect",[{tab:a.find("a")}]);if(n()>h.width()){if(a.next("li").length!=0){j.show("fade")}var b=g.find("li:last");var c=b[0].offsetLeft+b.outerWidth(true);var d=h.width()-g[0].offsetLeft-c;if(d>1){g.css("margin-left",g[0].offsetLeft+d-1);j.hide("fade")}}else{j.hide("fade");i.hide("fade");g.css("margin-left",0)}};k()}return b},_update:function(){console.log(arguments);d._update.apply(this)}});a.widget("xui.tabs",a.xui.tabs)})(jQuery)